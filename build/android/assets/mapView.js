module.exports=function(){var $=Ti.UI.createView(),Map=require("ti.map"),mapView=Map.createView({bottom:0,userLocation:!!Ti.Geolocation.locationServicesEnabled,region:{latitude:53.5535071,longitude:9.9899668,latitudeDelta:0.08,longitudeDelta:0.08},mapType:Map.NORMAL_TYPE,mapToolbarEnabled:!1,mapStyle:Ti.Filesystem.getFile(Ti.Filesystem.resourcesDirectory,"model","mapstyle.json").read().getText(),enableZoomControls:!1}),marker=Map.createAnnotation({latitude:53,longitude:10,image:"/assets/images/null.png",title:"Lade \u2026"});return mapView.addAnnotation(marker),mapView.addEventListener("complete",function(){mapView.addTileOverlay(Map.createTileOverlay({type:Map.TYPE_TMS,zIndex:10,tileProvider:"OpenSeaMap"})),mapView.addTileOverlay(Map.createTileOverlay({type:Map.TYPE_WMS,url:"http://geodienste.hamburg.de/HH_WMS_Cache",layer:"strassenbaum",crs:"UTM",zIndex:99,version:"1.1.1"})),mapView.addTileOverlay(Map.createTileOverlay({type:Map.TYPE_WMS,url:"http://geodienste.hamburg.de/HH_WMS_Strassenbaumkataster",layer:"strassenbaum_hpa",zIndex:99,crs:"WGS84",version:"1.3.0"})),mapView.addEventListener("mapclick",function(e){marker.latitude=e.latitude,marker.longitude=e.longitude,marker.title=" Lade \u2026 ",marker.subtitle="";var trees=require("store").getTrees({latitude:e.latitude,longitude:e.longitude,latitudeDelta:1e-3,longitudeDelta:1e-3});return trees&&trees[0]?void(marker.title=trees[0].sorte_latein,marker.subtitle=trees[0].sorte_deutsch,marker.latitude=trees[0].latitude,marker.longitude=trees[0].longitude,mapView.selectAnnotation(marker)):(mapView.deselectAnnotation(marker),void Ti.UI.createNotification({message:"F\xFCr diesen Standort gibt es leider keine Bauminformationen."}).show())})}),$.add(mapView),$};